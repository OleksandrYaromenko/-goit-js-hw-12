{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n\nexport async function requestPictures(query, currentPage) {\n    const API_KEY = '43436630-0ca2cab0bed204149ca1c5fee'\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: 15,\n    });\n    const { data } = await axios(`https://pixabay.com/api/?${params}`);\n    return data;\n}\n","export function creatMarkup(arr) {\n    return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments,downloads }) =>`\n     <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n                <ul class=\"search-list\">\n                    <li class=\"info\"><span class=\"info-item\">Likes </span>${likes}</li>\n                    <li class=\"info\"><span class=\"info-item\">Views </span>${views}</li>\n                    <li class=\"info\"><span class=\"info-item\">Comments </span>${comments}</li>\n                    <li class=\"info\"><span class=\"info-item\">Downloads </span>${downloads}</li>\n                </ul>\n            </a>\n\n\n    `).join()\n    \n} ","import iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nimport SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { requestPictures } from \"./js/pixabay-api\"\n\nimport { creatMarkup } from \"./js/render-functions\";\n\nconst form = document.querySelector(\".search-form\")\nconst gallery = document.querySelector(\".gallery\")\nconst loader = document.querySelector('.loader')\nconst formBtm = document.querySelector(\".form-btn\")\nformBtm.style.display = \"none\"\n\n\nform.addEventListener(\"submit\", handelSubmit)\nformBtm.addEventListener('click', searchImages);\nloader.style.display = 'none';\nlet currentPage = 1;;\nlet totalPages = 0;\n\n\nconst simpleLightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n\nasync function handelSubmit(event) {\n    event.preventDefault(); \n    formBtm.style.display = 'block';\n    loader.style.display = 'inline-block';\n    currentPage = 1;\n   \n    const {search} = event.currentTarget.elements\n    \n    if (search.value === \"\") { \n         iziToast.show({\n            title: 'error',\n            titleColor: 'white',\n            message: 'Please find what you want to find',\n            messageColor: 'white',\n            color: 'red',\n            position: 'topCenter',\n            timeout: '2000',\n        });\n        return;\n    }\n\n    try { \n        const data = await requestPictures( search.value,currentPage);\n        gallery.innerHTML = creatMarkup(data.hits)\n        simpleLightbox.refresh()\n        event.target.reset();\n        totalPages = Math.ceil(data.totalHits / 15);\n        if (currentPage < totalPages) {\n            formBtm.style.display = 'none';\n        }\n        if (data.total === 0) {\n            iziToast.show({\n                title: 'error',\n                titleColor: 'white',\n                message: 'We cannot find a picture for this name, please enter the correct name',\n                messageColor: 'white',\n                color: 'red',\n                position: 'topCenter',\n                timeout: '2000',\n            });\n            form.reset();\n            return;\n        }\n   \n        \n    } catch (Error) {\n        iziToast.show({\n            title: 'error',\n            titleColor: 'white',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            messageColor: 'white',\n            color: 'red',\n            position: 'topCenter',\n            timeout: '2000',\n        });\n    } finally {\n        loader.style.display = 'none';\n    }\n}\n    \n      \n    \n\nasync function searchImages() {\n    currentPage += 1; \n    loader.style.display = 'none';\n    try {\n        const images = await requestPictures( search.value,currentPage).then(data => {\n            const marcup = creatMarkup(data);\n            gallery.insertAdjacentHTML('beforeend', marcup);\n            simpleLightbox.refresh();\n\n            const cardHeight = gallery.getBoundingClientRect().height;\n            window.scrollBy({\n                top: 2 * cardHeight,\n                behavior: 'smooth',\n            });\n\n            if (data.hits.length <= 14) {\n                formBtm.style.display = 'none';\n               \n                simpleLightbox.refresh();\n            }\n        });\n    }\n    catch (error) {\n        iziToast.show({\n            message: error.message\n        });\n    } finally {\n        loader.style.display = 'none';\n    }\n}"],"names":["requestPictures","query","currentPage","API_KEY","params","data","axios","creatMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","loader","formBtm","handelSubmit","searchImages","totalPages","simpleLightbox","SimpleLightbox","event","search","iziToast","images","marcup","cardHeight","error"],"mappings":"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"}